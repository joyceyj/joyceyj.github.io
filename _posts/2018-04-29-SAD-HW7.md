---
layout: post
title: 系统分析与设计HW7
date: 2018-04-29
categories: HW
---
# 系统分析与设计HW7

## 1、 领域建模

a. 阅读 Asg_RH 文档，按用例构建领域模型。
按 Task2 要求，请使用工具 UMLet，截图格式务必是 png 并控制尺寸
说明：请不要受 PCMEF 层次结构影响。你需要识别实体（E）和 中介实体（M，也称状态实体）
在单页面应用（如 vue）中，E 一般与数据库构建有关， M 一般与 store 模式 有关
在 java web 应用中，E 一般与数据库构建有关， M 一般与 session 有关

![](/image/HW7_1.png)

b. 数据库建模(E-R 模型)

- 按 Task 3 要求，给出系统的 E-R 模型（数据逻辑模型）
- 建模工具 PowerDesigner（简称PD） 或开源工具 OpenSystemArchitect
- 不负责的链接 http://www.cnblogs.com/mcgrady/archive/2013/05/25/3098588.html

![](/image/HW7_2.png)

- 导出 Mysql 物理数据库的脚本
```
-- MySQL Script generated by MySQL Workbench
-- Mon April  29 14:04:29 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`room`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`room` (
  `roomID` INT NOT NULL,
  `roomType` VARCHAR(45) NULL,
  `hotelName` VARCHAR(45) NULL,
  PRIMARY KEY (`roomID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`hotel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`hotel` (
  `hotelName` VARCHAR(45) NOT NULL,
  `city` VARCHAR(45) NULL,
  `town` VARCHAR(45) NULL,
  `room_roomID` INT NOT NULL,
  PRIMARY KEY (`hotelName`, `room_roomID`),
  INDEX `fk_hotel_room_idx` (`room_roomID` ASC),
  CONSTRAINT `fk_hotel_room`
    FOREIGN KEY (`room_roomID`)
    REFERENCES `mydb`.`room` (`roomID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`reservation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`reservation` (
  `reservationID` INT NOT NULL,
  `roomType` VARCHAR(45) NULL,
  `checkinDate` DATE NULL,
  `checkoutDate` DATE NULL,
  `price` FLOAT NULL,
  `customerName` VARCHAR(45) NULL,
  `hotel_hotelName` VARCHAR(45) NOT NULL,
  `hotel_room_roomID` INT NOT NULL,
  PRIMARY KEY (`reservationID`, `hotel_hotelName`, `hotel_room_roomID`),
  INDEX `fk_reservation_hotel1_idx` (`hotel_hotelName` ASC, `hotel_room_roomID` ASC),
  CONSTRAINT `fk_reservation_hotel1`
    FOREIGN KEY (`hotel_hotelName` , `hotel_room_roomID`)
    REFERENCES `mydb`.`hotel` (`hotelName` , `room_roomID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`reservation_busket`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`reservation_busket` (
  `userID` INT NOT NULL,
  `reservationID` INT NOT NULL,
  `reservation_reservationID` INT NOT NULL,
  `reservation_hotel_hotelName` VARCHAR(45) NOT NULL,
  `reservation_hotel_room_roomID` INT NOT NULL,
  PRIMARY KEY (`userID`, `reservation_reservationID`, `reservation_hotel_hotelName`, `reservation_hotel_room_roomID`),
  INDEX `fk_reservation_busket_reservation1_idx` (`reservation_reservationID` ASC, `reservation_hotel_hotelName` ASC, `reservation_hotel_room_roomID` ASC),
  CONSTRAINT `fk_reservation_busket_reservation1`
    FOREIGN KEY (`reservation_reservationID` , `reservation_hotel_hotelName` , `reservation_hotel_room_roomID`)
    REFERENCES `mydb`.`reservation` (`reservationID` , `hotel_hotelName` , `hotel_room_roomID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user` (
  `userID` INT NOT NULL,
  `userName` VARCHAR(45) NULL,
  `phong` INT NULL,
  `email` VARCHAR(45) NULL,
  `reservation_busket_userID` INT NOT NULL,
  PRIMARY KEY (`userID`, `reservation_busket_userID`),
  INDEX `fk_user_reservation_busket1_idx` (`reservation_busket_userID` ASC),
  CONSTRAINT `fk_user_reservation_busket1`
    FOREIGN KEY (`reservation_busket_userID`)
    REFERENCES `mydb`.`reservation_busket` (`userID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
```

- 简单叙说 数据库逻辑模型 与 领域模型 的异同
    * 异：领域模型主要是面向需求分析的建模，目的是让业务人员了解需求，而数据库逻辑模型是面向设计的建模，目的是让程序员了解系统的数据逻辑从而设计系统数据结构。
    * 同：都是对系统的结构进行建模，利用图形解释各个类（实体）之间的关系，使工作人员直接地了解系统的设计结构。



